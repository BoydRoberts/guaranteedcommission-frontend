<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GuaranteedCommission.com</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="bg-gray-100 text-gray-800">

<!-- Header -->
<header class="bg-white shadow">
  <div class="flex justify-between items-center max-w-7xl mx-auto px-4 py-4">
    <button onclick="openInvestorModal()" class="bg-red-600 text-white text-xs font-semibold px-3 py-1 rounded">
      Accredited Investors Only
    </button>
    <div class="text-center flex-1">
      <h1 class="text-3xl font-bold">GuaranteedCommission.com</h1>
      <p class="text-sm text-red-600 mt-1 px-2">
        Guaranteeing buyer agent’s commissions so your home will sell quickly at a higher price.
      </p>
    </div>
    <div class="w-24"></div>
  </div>
</header>

<!-- Navigation Bar -->
<nav class="bg-gray-200 py-2">
  <ul class="flex justify-center space-x-8 font-semibold">
    <li class="relative group">
      <a href="#" class="hover:underline">Communicate Guaranteed Commission</a>
      <ul class="absolute left-0 mt-2 w-64 bg-white border shadow hidden group-hover:block text-sm text-gray-700">
        <li><a href="#" onclick="showForm('listed')" class="block px-4 py-2 hover:bg-gray-100">Listed Property Basic</a></li>
        <li><a href="#" onclick="showForm('plus')" class="block px-4 py-2 hover:bg-gray-100">Listed Property Plus</a></li>
        <li><a href="#" onclick="showForm('fsbo')" class="block px-4 py-2 hover:bg-gray-100">FSBO Plus</a></li>
      </ul>
    </li>
    <li><a href="#strip2Search" class="hover:underline">Search Guaranteed Commission</a></li>
    <li><a href="/login.html" class="hover:underline">Log In</a></li>
  </ul>
</nav>

<!-- Strip 1 -->
<section class="flex flex-col md:flex-row justify-center items-start gap-6 px-4 py-8 max-w-7xl mx-auto">

  <!-- Block 2 -->
  <div id="formBlock" class="w-full md:w-1/3 bg-white p-4 rounded shadow text-sm">
    <h2 class="text-lg font-bold mb-4 text-center">Listed Property Communication Form</h2>
    <form id="listingForm" class="space-y-2" autocomplete="off">
      <input type="text" id="name" placeholder="Name" class="w-full border p-1 rounded" required>
      <input type="text" id="address" placeholder="Full Property Address" class="w-full border p-1 rounded" required>
      <input type="text" id="apn" placeholder="Parcel / PIN / Tax ID / Folio / APN #" class="w-full border p-1 rounded">
      <div class="flex gap-2">
        <input type="text" id="commission" placeholder="Commission" class="w-full border p-1 rounded" required>
        <select id="commissionType" class="border p-1 rounded">
          <option value="%">%</option>
          <option value="$">$</option>
        </select>
      </div>
      <div class="relative">
        <input type="tel" id="agentPhone" inputmode="numeric" placeholder="Agent’s direct phone only – NOT your number" class="w-full border p-1 rounded" autocomplete="off" required>
        <span id="phoneError" class="text-xs text-red-600 hidden">Please enter a valid phone number (123-456-7890)</span>
      </div>
      <input type="text" id="brokerage" placeholder="Listing Brokerage" class="w-full border p-1 rounded">
      <input type="text" id="agent" placeholder="Listing Agent" class="w-full border p-1 rounded">
      <button type="button" onclick="validateAndSubmit()" class="w-full bg-blue-600 text-white py-2 rounded mt-2">Submit</button>
    </form>
  </div>

  <!-- Block 3 -->
  <div class="w-full md:w-1/3 bg-white p-4 rounded shadow text-sm text-justify">
    <h2 class="text-lg font-bold mb-2 text-center">Irrevocable Seller Communication</h2>
    <p><strong>To the escrow holder/closing agent,</strong></p>
    <p>
      I <span id="letterName" class="text-blue-700 opacity-80">[name]</span> am the owner/seller of 
      <span id="letterAddress" class="text-blue-700 opacity-80">[full address]</span>, 
      #<span id="letterAPN" class="text-blue-700 opacity-80">[ID#]</span>.
      <span id="letterAddressShort" class="text-blue-700 opacity-80">[short address]</span> is listed for sale by 
      <span id="letterBrokerage" class="text-blue-700 opacity-80">[listing brokerage]</span>, 
      <span id="letterAgent" class="text-blue-700 opacity-80">[listing agent]</span>, listing agent, 
      <span id="letterAgentPhone" class="text-blue-700 opacity-80">[agent phone]</span>.
    </p>
    <p>
      Let it be known: if a buyer’s agent/broker facilitates the sale of 
      <span id="letterAddressShort2" class="text-blue-700 opacity-80">[short address]</span>, you (the escrow holder/closing agent) are irrevocably instructed to credit/compensate the buyer’s broker – first, by debiting the listing brokerage (if applicable) and second by debiting me, the seller – a commission not to exceed 
      <span id="letterCommissionDisplay" class="text-blue-700 opacity-80">[commission with symbol]</span>.
    </p>
    <p class="mt-2"><span class="pl-5 font-cursive">Electronic Signature - <span id="signatureDate"></span></span></p>
  </div>
</section>

<!-- Script -->
<script>
  const phoneInput = document.getElementById("agentPhone");
  const phoneError = document.getElementById("phoneError");

  phoneInput.addEventListener("input", function () {
    let val = this.value.replace(/\D/g, "");
    if (val.length > 3 && val.length <= 6) {
      val = val.replace(/(\d{3})(\d+)/, "$1-$2");
    } else if (val.length > 6) {
      val = val.replace(/(\d{3})(\d{3})(\d+)/, "$1-$2-$3");
    }
    this.value = val;
    validatePhoneLive();
  });

  function validatePhoneLive() {
    const phonePattern = /^\d{3}-\d{3}-\d{4}$/;
    if (!phonePattern.test(phoneInput.value)) {
      phoneInput.classList.add("border-red-500");
      phoneError.classList.remove("hidden");
    } else {
      phoneInput.classList.remove("border-red-500");
      phoneError.classList.add("hidden");
    }
  }

  function validateAndSubmit() {
    const address = document.getElementById("address").value.trim();
    const phone = phoneInput.value.trim();
    const phonePattern = /^\d{3}-\d{3}-\d{4}$/;

    if (!address) {
      alert("Please enter the full property address.");
      return;
    }
    if (!phonePattern.test(phone)) {
      alert("Please enter a valid agent phone number in the format 123-456-7890.");
      return;
    }

    if (document.querySelector("#formBlock h2").textContent.includes("Plus")) {
      alert("Stripe Test Checkout Initiated (Placeholder)");
    } else {
      alert("Form validated and submitted successfully.");
    }
  }
</script>

<style>
  .font-cursive {
    font-family: 'Brush Script MT', cursive;
  }
</style>

</body>
</html>
