<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upgrade Options</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <div class="max-w-xl mx-auto mt-20 bg-white p-6 rounded shadow text-center">
    <h1 class="text-2xl font-bold mb-6">Upgrade Your Listing</h1>

    <h2 id="upsellTitle" class="text-lg font-semibold mb-4"></h2>
    <p id="upsellDescription" class="text-sm text-gray-700 mb-6"></p>

    <div class="flex justify-center gap-4">
      <button onclick="acceptUpsell()" class="bg-green-600 text-white px-6 py-2 rounded">Yes</button>
      <button onclick="skipUpsell()" class="bg-gray-400 text-white px-6 py-2 rounded">Skip</button>
    </div>
  </div>

  <script>
    const plan = localStorage.getItem("selectedPlan") || "";
    const upsells = [];

    // Build upsell options
    if (plan === "Listed Property Basic") {
      upsells.push({
        key: "upgradeToPlus",
        title: "Upgrade to Listed Property Plus ($20)",
        desc: "Add 20 photos and a full property description to your listing."
      });
    }

    if (plan === "Listed Property Basic" || plan === "Listed Property Plus") {
      upsells.push(
        {
          key: "banner",
          title: "Add Banner ($10)",
          desc: "Display a 30-character banner to promote features like 'Open House' or 'Ocean View'."
        },
        {
          key: "premium",
          title: "Add Premium Placement ($10)",
          desc: "Your listing will be shown before non-premium listings in your selected search area."
        },
        {
          key: "pin",
          title: "Add Pin Placement ($50)",
          desc: "Pin your listing at the top of results. Includes Premium Placement for free."
        }
      );
    }

    if (plan === "FSBO Plus") {
      upsells.push(
        {
          key: "confidential",
          title: "Confidential FSBO Upgrade ($100)",
          desc: "Keep your contact info private and prevent solicitations from third parties."
        },
        {
          key: "banner",
          title: "Add Banner ($10)",
          desc: "Display a 30-character banner to promote features like 'Open House' or 'Ocean View'."
        },
        {
          key: "premium",
          title: "Add Premium Placement ($10)",
          desc: "Your listing will be shown before non-premium listings in your selected search area."
        },
        {
          key: "pin",
          title: "Add Pin Placement ($50)",
          desc: "Pin your listing at the top of results. Includes Premium Placement for free."
        }
      );
    }

    let current = 0;

    function showUpsell() {
      while (current < upsells.length && localStorage.getItem(upsells[current].key) === "true") {
        current++;
      }

      if (current >= upsells.length) {
        window.location.href = "/checkout.html";
        return;
      }

      const offer = upsells[current];
      document.getElementById("upsellTitle").textContent = offer.title;
      document.getElementById("upsellDescription").textContent = offer.desc;
    }

    function acceptUpsell() {
      const key = upsells[current].key;
      localStorage.setItem(key, "true");

      if (key === "pin") {
        localStorage.setItem("premium", "true"); // pin includes premium
      }

      current++;
      showUpsell();
    }

    function skipUpsell() {
      current++;
      showUpsell();
    }

    window.addEventListener("DOMContentLoaded", showUpsell);
  </script>

</body>
</html>
