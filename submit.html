<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Submission Complete</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <div class="max-w-2xl mx-auto mt-12 bg-white p-8 rounded shadow text-center">
    <h1 class="text-2xl font-bold mb-6">Submission Complete</h1>
    <p class="mb-6 text-sm">You have successfully signed the Irrevocable Seller Communication (ISC) for <strong id="shortAddress">[short address]</strong>.</p>

    <div id="listedOptions" class="space-y-4 hidden">
      <button onclick="viewISC()" class="w-full bg-blue-600 text-white py-2 rounded">View Irrevocable Seller Communication</button>
      <button onclick="inviteAgent()" class="w-full bg-yellow-500 text-white py-2 rounded">Invite Listing Agent to Complete Listing Details</button>
      <button onclick="completeListing()" class="w-full bg-green-600 text-white py-2 rounded">Complete Listing Details</button>
    </div>

    <div id="fsboOptions" class="space-y-4 hidden">
      <button onclick="viewISC()" class="w-full bg-blue-600 text-white py-2 rounded">View Irrevocable Seller Communication</button>
      <button onclick="completeListing()" class="w-full bg-green-600 text-white py-2 rounded">Complete Listing Details</button>
    </div>

    <div id="investorResponse" class="mt-10 text-sm text-green-600 font-semibold hidden">
      We will be in touch.
    </div>
  </div>

  <script>
    const planType = localStorage.getItem("postSignatureOptions");
    const shortAddress = localStorage.getItem("shortAddress") || "[short address]";
    const formData = JSON.parse(localStorage.getItem("formData") || "{}");
    const sellerName = formData.name || "[seller name]";
    const commission = formData.commission || "[commission]";
    const agentName = formData.agent || "[listing agent]";
    const agentEmail = formData.brokerage || "agent@example.com";

    document.getElementById("shortAddress").textContent = shortAddress;

    if (planType === "fsbo") {
      document.getElementById("fsboOptions").classList.remove("hidden");
    } else {
      document.getElementById("listedOptions").classList.remove("hidden");
    }

    function viewISC() {
      window.open("/printable-isc.html", "_blank");
    }

    function inviteAgent() {
      alert(`${agentName}, your seller ${sellerName} has signed an Irrevocable Seller Communication (ISC) through GuaranteedCommission.com pertaining to ${shortAddress} guaranteeing to pay the buyer’s agent ${commission} and invites you to complete the listing details at [insert link to listing detail page] to better inform interested buyers and buyer’s agents. To view the ISC, visit [insert link to seller ISC]. Thank you, GuaranteedCommission.com.`);
      // Ideally trigger email + SMS from backend service here.
    }

    function completeListing() {
      window.location.href = "/listing-intake.html";
    }

    // Accredited investor form response
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get("investor") === "submitted") {
      document.getElementById("investorResponse").classList.remove("hidden");
    }
  </script>

</body>
</html>
