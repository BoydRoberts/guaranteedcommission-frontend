<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Review Cart and Checkout</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="max-w-xl mx-auto mt-10 bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-bold text-center mb-4">Review Cart and Checkout</h1>

    <div class="space-y-4">
      <p><strong>Selected Plan:</strong> <span id="selectedPlan">...</span></p>
      <p><strong>Cost of Selected Plan:</strong> <span id="planCost">...</span></p>

      <div>
        <p class="font-semibold mb-2">Upgrades:</p>
        <label class="block"><input type="checkbox" id="upgradePlus" onchange="updateCart()"> Upgrade to Listed Property Plus ($20)</label>
        <label class="block"><input type="checkbox" id="upgradeBanner" onchange="updateCart()"> Banner ($10)</label>
        <label class="block"><input type="checkbox" id="upgradePin" onchange="updateCart()"> Pin Placement ($50)</label>
      </div>

      <p><strong>Total:</strong> $<span id="totalAmount">0</span></p>

      <button onclick="checkout()" class="w-full bg-green-600 text-white py-2 rounded mt-4">Pay Now</button>
    </div>
  </div>

  <script>
    let baseCost = 0;

    function updateCart() {
      const plus = document.getElementById("upgradePlus").checked;
      const banner = document.getElementById("upgradeBanner").checked;
      const pin = document.getElementById("upgradePin").checked;

      let total = baseCost;
      if (plus) total += 20;
      if (banner) total += 10;
      if (pin) total += 50;

      const selectedPlanLabel = document.getElementById("selectedPlan");
      const planLabel = plus ? "Listed Property Plus" : localStorage.getItem("selectedPlan") || "...";
      selectedPlanLabel.textContent = planLabel;

      document.getElementById("totalAmount").textContent = total;
    }

    function checkout() {
      alert("Proceeding to payment...");
      window.location.href = "/signature.html";
    }

    window.addEventListener("DOMContentLoaded", () => {
      const plan = localStorage.getItem("selectedPlan") || "...";
      const planCostMap = {
        "Listed Property Basic": 0,
        "Listed Property Plus": 20,
        "FSBO Plus": 100
      };

      baseCost = planCostMap[plan] || 0;

      document.getElementById("selectedPlan").textContent = plan;
      document.getElementById("planCost").textContent = `$${baseCost}`;
      updateCart();
    });
  </script>
</body>
</html>
